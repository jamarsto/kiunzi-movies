# Build time configuration & dev services configuration
quarkus:
  container-image:
    group: ${docker_group}
    name: ${docker_name}
    password: ${DOCKER_HUB_TOKEN}
    push: ${docker_push}
    registry: ${docker_registry}
    tag: ${docker_tag}
    username: ${docker_username}
  kubernetes:
    deploy: ${kubernetes_deploy}
    env:
      mapping:
        database-kind:
          from-secret: kiunzi-secrets
          with-key: database-kind
        database-username:
          from-secret: kiunzi-secrets
          with-key: database-username
        database-password:
          from-secret: kiunzi-secrets
          with-key: database-password
        database-url:
          from-secret: kiunzi-secrets
          with-key: database-url
        token-issuer:
          from-secret: kiunzi-secrets
          with-key: token-issuer
    mounts:
      public-key-volume:
        path: /keyfiles
    name: ${kubernetes_name}
    namespace: ${kubernetes_namespace}
    secret-volumes:
      public-key-volume:
        secret-name: kiunzi-public-key-secret
  jib:
    base-jvm-image: ${jib_base_jvm_image}
    base-registry-username: ${jib_base_registry_username}
    base-registry-password: ${DOCKER_HUB_TOKEN}

# development profile configuration
"%dev":
  mp:
    jwt:
      verify:
        publickey:
          location: publicKey.pem
        issuer: ${TOKEN_ISSUER}
  quarkus:
    datasource:
      db-kind: ${DATABASE_KIND}
    hibernate-orm:
      database:
        generation: drop-and-create
    http:
      port: 8080
    smallrye-jwt:
      enabled: true

# production profile configuration
"%prod":
  mp:
    jwt:
      verify:
        publickey:
          location: /keyfiles/publicKey.pem
        issuer: ${TOKEN_ISSUER}
  quarkus:
    datasource:
      db-kind: ${DATABASE_KIND}
      username: ${DATABASE_USERNAME}
      password: ${DATABASE_PASSWORD}
      reactive:
        url: ${DATABASE_URL}
    http:
      port: 8080
